<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Webgrab Extension</title>
    <!-- Link to Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.1/css/bulma.min.css">
    <!-- Link to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Force light theme and set base styles */
        body {
            width: 350px;
            font-family: 'Inter', sans-serif;
            overflow-y: auto;
            padding: 1.5rem;
            background-color: #f5f5f5 !important; /* Force light grey background */
            color: #363636 !important; /* Default Bulma text color */
        }
        /* Ensure labels are visible */
        .label {
            color: #363636 !important;
        }
        /* Ensure title is visible */
        .title {
            color: #363636 !important;
        }
        /* Force light background for box */
        .box {
            background-color: #ffffff !important;
            color: #363636 !important;
        }
        .box p.has-text-grey {
            color: #7a7a7a !important; /* Keep subtitle grey */
        }
        .box p.has-text-dark {
             color: #363636 !important; /* Ensure main count is dark */
        }

        /* Force light background/border for inputs and selects */
        .input, .select select {
            background-color: #ffffff !important;
            border-color: #dbdbdb !important;
            color: #363636 !important;
        }
        .select:not(.is-multiple):not(.is-loading)::after {
             border-color: #3273dc !important; /* Bulma's default arrow color */
        }

        /* Style disabled buttons and select */
        button:disabled, select:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }
        select:disabled {
             background-color: #f5f5f5 !important; /* Bulma disabled background */
             border-color: #dbdbdb !important;
             color: #7a7a7a !important;
        }
        button:disabled {
            background-color: #f5f5f5 !important;
            border-color: #dbdbdb !important;
            color: #7a7a7a !important;
            box-shadow: none !important;
        }

        /* Re-apply default Bulma button colors explicitly */
        .button.is-link { background-color: #3e8ed0 !important; border-color: transparent !important; color: #fff !important; }
        .button.is-link:hover { background-color: #3082c5 !important; }
        .button.is-success { background-color: #48c78e !important; border-color: transparent !important; color: #fff !important; }
        .button.is-success:hover { background-color: #3abb81 !important; }
        .button.is-danger { background-color: #f14668 !important; border-color: transparent !important; color: #fff !important; }
        .button.is-danger:hover { background-color: #f03a5f !important; }
        .button.is-light { background-color: #f5f5f5 !important; border-color: #dbdbdb !important; color: #363636 !important; }
        .button.is-light:hover { background-color: #eee !important; border-color: #b5b5b5 !important;}


        /* Hide the new batch section initially */
        #new-batch-section {
            display: none;
            margin-bottom: 1rem;
            padding: 1rem;
            background-color: white !important; /* Force light background */
            border-radius: 6px;
            box-shadow: 0 0.5em 1em -0.125em rgba(10, 10, 10, 0.1), 0 0px 0 1px rgba(10, 10, 10, 0.02);
            border: 1px solid #dbdbdb;
        }
        /* Align items in the addon group vertically */
        .field.has-addons.is-align-items-center {
            align-items: center;
        }
        .field.has-addons .control:not(:last-child) {
            margin-right: 0;
        }
         /* Basic scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #a8a8a8;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #888;
        }
        /* Ensure selects expand fully */
        .select, .select select {
            width: 100%;
        }
        /* Ensure help text is visible */
        .help {
            color: #7a7a7a !important;
        }
    </style>
</head>
<body >

    <h1 class="title is-4 has-text-centered mb-4">Webgrab</h1>

    <div class="field mb-3">
        <label class="label is-small" for="batch-select">Current Batch:</label>
        <!-- Added is-align-items-center for vertical alignment -->
        <div class="field has-addons is-align-items-center">
            <div class="control is-expanded">
                <div class="select is-fullwidth is-small">
                    <select id="batch-select" name="batch-select">
                        <option value="">-- No Batch Selected --</option>
                        <!-- Batches will be populated here by popup.js -->
                    </select>
                </div>
            </div>
            <div class="control">
                <button id="show-new-batch-btn" title="Create New Batch" class="button is-link is-small">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width:1em; height:1em;">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div id="new-batch-section">
        <div class="field">
            <label class="label is-small" for="new-batch-name">New Batch Name:</label>
            <div class="control">
                <input class="input is-small" type="text" id="new-batch-name" placeholder="e.g., Avvo Detroit PI Lawyers">
            </div>
        </div>
        <div class="field is-grouped is-grouped-right mt-2">
            <div class="control">
                 <button id="cancel-new-batch-btn" class="button is-light is-small">Cancel</button>
            </div>
            <div class="control">
                 <button id="create-batch-btn" class="button is-success is-small">Create Batch</button>
            </div>
        </div>
    </div>


    <div class="box has-text-centered mb-4 p-3">
        <p class="is-size-7 has-text-grey">Pages saved in selected batch:</p>
        <p id="page-count" class="title is-3 has-text-dark mt-1">N/A</p>
    </div>

    <div class="field is-grouped is-grouped-centered is-flex-direction-column" style="gap: 0.625rem;">
        <div class="control is-expanded">
            <button id="save-page-btn" class="button is-link is-fullwidth" disabled>
                Save Current Page to Batch
            </button>
        </div>
        <div class="control is-expanded">
            <button id="export-data-btn" class="button is-success is-fullwidth" disabled>
                Export Selected Batch (.jsonl)
            </button>
        </div>
        <div class="control is-expanded">
            <button id="delete-batch-btn" class="button is-danger is-fullwidth" disabled>
                Delete Selected Batch
            </button>
        </div>
    </div>

     <p id="status-message" class="help has-text-centered mt-3" style="min-height: 1.25em;"></p>

    <script src="popup.js"></script>
</body>
</html>

